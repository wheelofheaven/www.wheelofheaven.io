# mise.toml

min_version = "2025.8.3"

[tools]
zola = "0.21.0"
python = "3.12"
uv = "latest"
node = "22"

[env]
# add env vars here

[tasks.bundle]
description = "Bundle JS files with esbuild"
run = "cd themes/bifrost && npm install --silent && npm run bundle"

[tasks.build]
description = "Compile site statically with Zola"
depends = ["bundle"]
run = "zola build"

[tasks.purgecss]
description = "Remove unused CSS from built files"
depends = ["build"]
run = "cd themes/bifrost && npm run purgecss"

[tasks.build-prod]
description = "Production build with CSS purging"
run = "mise run build && mise run purgecss"

[tasks.serve]
description = "Run dev server (live reload)"
run = "zola serve --port 1199 --interface 0.0.0.0 --base-url http://localhost:1199 --no-port-append --open"
# Make "serve" exclusive, since it's interactive
raw = true

[tasks.check]
description = "Run diagnostics without writing files"
run = "zola check"

[tasks.clean]
description = "Wipe public directory"
run = "rm -rf public || true"
