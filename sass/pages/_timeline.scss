// Timeline Section - Immersive Experience
//
// Interactive storytelling timeline with Earth animation and smooth scroll transitions

@use "../abstracts/colors" as colors;
@use "../abstracts/variables" as vars;
@use "../base/typography" as typo;

// Timeline page main element override
main:has(.timeline-section) {
    background: var(--color-background) !important;
    padding: 0 !important;
    max-width: none !important;
    position: relative;
    z-index: 1;
    overflow: visible;
    min-height: 100vh;
}

// Timeline section - proper page section with opaque background
.timeline-section {
    position: relative;
    width: 100vw;
    height: 100vh;
    overflow: hidden;
    background: var(--color-background);
    z-index: 1;
    transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
}

// Timeline content container - horizontal scroller
.timeline-content {
    position: absolute;
    top: 0;
    left: 0;
    width: 1300vw; // 13 ages Ã— 100vw each = 1300vw total width
    height: 100vh;
    background: transparent;
    overflow: visible;
    display: flex;
    transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
}

// Earth Animation Container - Fixed position for constellation alignment
.earth-container {
    position: fixed;
    top: 85%;
    left: 30%;
    transform: translate(-50%, -50%);
    width: 600px;
    height: 600px;
    z-index: 6;
    transition: opacity 0.3s ease;

    @media (max-width: 1200px) {
        left: 25%;
        width: 480px;
        height: 480px;
    }

    @media (max-width: 768px) {
        left: 50%;
        top: 85%;
        width: 420px;
        height: 420px;
        opacity: 0.6;
    }
}

.earth-sphere {
    position: relative;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    overflow: hidden;
    box-shadow:
        0 0 50px rgba(0, 0, 0, 0.3),
        inset -20px -20px 50px rgba(0, 0, 0, 0.5);
}

.earth-container svg {
    width: 100%;
    height: 100%;
}

// Earth Sunrise - positioned at upper-right zenith of Earth
.earth-sunrise {
    position: fixed;
    top: calc(85% - 450px); /* Above Earth's center */
    left: calc(30% + 150px); /* To the right of Earth's center */
    transform: translate(-50%, -50%);
    width: 200px;
    height: 200px;
    pointer-events: none;
    z-index: 5;
    transition: opacity 0.3s ease;

    @media (max-width: 1200px) {
        top: calc(85% - 380px);
        left: calc(25% + 120px);
        width: 160px;
        height: 160px;
    }

    @media (max-width: 768px) {
        top: calc(60% - 180px);
        left: calc(50% + 80px);
        width: 120px;
        height: 120px;
    }
}

.sunrise-image {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 100%;
    height: 100%;
    object-fit: contain;
    pointer-events: none;
}

// Integrated Age Card Container
.age-card-container {
    position: fixed;
    top: 10%;
    right: 5%;
    width: 450px;
    z-index: 10;
    transition: opacity 0.3s ease, transform 0.3s ease;

    @media (max-width: 1200px) {
        width: 400px;
        right: 3%;
    }

    @media (max-width: 768px) {
        top: 50%;
        left: 50%;
        right: auto;
        transform: translate(-50%, -50%);
        width: 90%;
        max-width: 400px;
    }

    // Navigation buttons positioned on sides of container
    .timeline-nav__btn {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        width: 60px;
        height: 120px;
        border-radius: vars.$border-radius-lg;
        background: transparent;
        border: 1px solid rgba(255, 255, 255, 0.2);
        backdrop-filter: blur(10px);
        color: var(--color-accent-primary);
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.3s ease;
        z-index: 2;

        &:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--color-accent-primary);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }

        &:disabled {
            opacity: 0.3;
            cursor: not-allowed;

            &:hover {
                background: transparent;
                border-color: rgba(255, 255, 255, 0.2);
                box-shadow: none;
            }
        }

        &--prev {
            left: -80px;
        }

        &--next {
            right: -80px;
        }

        svg {
            width: 24px;
            height: 24px;
        }

        @media (max-width: 768px) {
            width: 50px;
            height: 100px;

            &--prev {
                left: -65px;
            }

            &--next {
                right: -65px;
            }

            svg {
                width: 20px;
                height: 20px;
            }
        }
    }
}

.age-card {
    background: transparent;
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: vars.$border-radius-xl;
    padding: 2rem;
    padding-bottom: 5rem; // Extra space for progress bar
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    box-shadow:
        0 25px 50px rgba(0, 0, 0, 0.25),
        0 0 0 1px rgba(255, 255, 255, 0.05),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
    transition: all 0.4s ease;
    position: relative;
    overflow: visible;

    &::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(255, 255, 255, 0.15);
        border-radius: inherit;
        z-index: -1;
    }

    &::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: linear-gradient(
            90deg,
            transparent,
            var(--age-color, var(--color-accent-primary)),
            transparent
        );
        border-radius: vars.$border-radius-xl vars.$border-radius-xl 0 0;
    }
}

.age-card__symbol {
    position: absolute;
    top: 1rem;
    right: 1rem;
    width: 60px;
    height: 60px;
    background: linear-gradient(
        135deg,
        var(--age-color, var(--color-accent-primary)),
        var(--age-color, var(--color-accent-primary)) cc
    );
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2.5rem;
    font-family: typo.$font-family-tech;
    color: #ffffff;
    box-shadow:
        0 8px 24px rgba(0, 0, 0, 0.3),
        0 0 0 2px rgba(255, 255, 255, 0.1);

    @media (max-width: 768px) {
        width: 50px;
        height: 50px;
        font-size: 1.25rem;
        top: 1rem;
        right: 1rem;
    }
}

.age-card__content {
    margin-top: 1rem;
}

.age-card__title {
    font-family: typo.$font-family-lead;
    font-size: 1.75rem;
    font-weight: 700;
    color: var(--color-text);
    margin: 0 0 1rem 0;
    line-height: 1.2;

    @media (max-width: 768px) {
        font-size: 1.5rem;
    }
}

.age-card__timespan {
    font-family: typo.$font-family-tech;
    font-size: 0.875rem;
    color: var(--color-text-muted);
    margin-bottom: 1.5rem;
    margin-top: 0.5rem;

    @media (max-width: 768px) {
        font-size: 0.75rem;
    }
}

.age-card__separator {
    color: var(--age-color, var(--color-accent-primary));
    font-weight: 600;
    font-size: 1.2em;
}

.age-card__description {
    font-size: 1rem;
    line-height: 1.6;
    color: var(--color-text);
    margin-bottom: 2rem;
    text-align: left;

    @media (max-width: 768px) {
        font-size: 0.9rem;
        margin-bottom: 1.5rem;
    }
}

.age-card__footer {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    padding-top: 1rem;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
}

// Age Progress Bar with 12 segments - positioned at bottom of card
.age-progress {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    margin: 0;
    padding: 1rem;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 0 0 vars.$border-radius-xl vars.$border-radius-xl;
    border-top: 1px solid rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(10px);
}

.age-progress__segments {
    display: flex;
    gap: 3px;
    height: 18px;
    background: var(--color-background-tertiary);
    border-radius: 8px;
    overflow: visible;
    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);
    cursor: pointer;
    padding: 2px;
}

.age-progress__segment {
    flex: 1;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 4px;
    transition: all 0.3s ease;
    cursor: pointer;
    min-width: 12px;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: typo.$font-family-tech;
    font-size: 0.5rem;
    color: var(--color-text-muted);

    &--active {
        background: var(--age-color, var(--color-accent-primary));
        box-shadow: 0 0 10px var(--age-color, var(--color-accent-primary));
        transform: scaleY(1.2);
        color: var(--color-background);
    }

    &:hover {
        background: rgba(255, 255, 255, 0.4);
        transform: scaleY(1.1);
        color: var(--color-text);
    }
}

// Age selector dropdown (positioned above progress bar)
.age-selector {
    position: relative;
}

.age-selector__dropdown {
    position: absolute;
    bottom: calc(100% + 15px);
    left: 1.25rem;
    right: 1.25rem;
    max-height: 350px;
    background: transparent;
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: vars.$border-radius-lg;
    backdrop-filter: blur(20px) saturate(180%);
    box-shadow:
        0 30px 60px rgba(0, 0, 0, 0.4),
        0 0 0 1px rgba(255, 255, 255, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.2);
    opacity: 0;
    visibility: hidden;
    transform: translateY(15px) scale(0.95);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    overflow-y: auto;
    z-index: 100;

    &::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(255, 255, 255, 0.18);
        border-radius: inherit;
        z-index: -1;
    }

    &--open {
        opacity: 1;
        visibility: visible;
        transform: translateY(0) scale(1);
    }
}

.age-selector__option {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    width: 100%;
    padding: 0.75rem 1rem;
    background: transparent;
    border: none;
    color: var(--color-text);
    font-family: typo.$font-family-tech;
    font-size: 0.875rem;
    cursor: pointer;
    transition: all 0.2s ease;
    text-align: left;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);

    &:last-child {
        border-bottom: none;
    }

    &:hover {
        background: rgba(255, 255, 255, 0.1);
        color: var(--color-accent-primary);
    }
}

.age-selector__option-symbol {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 24px;
    height: 24px;
    font-size: 1rem;
    font-family: typo.$font-family-tech;
}

// Images section
.age-card__images {
    margin: 1rem -2rem 0 -2rem;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.age-card__image {
    width: 100%;
    height: 120px;
    object-fit: cover;
    border: none;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.age-card__link {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 1rem 2rem;
    background: linear-gradient(
        135deg,
        var(--age-color, var(--color-accent-primary)),
        var(--age-color, var(--color-accent-primary)) cc
    );
    color: var(--color-background);
    text-decoration: none;
    border-radius: vars.$border-radius-full;
    font-weight: 600;
    font-size: 0.875rem;
    transition: all 0.3s ease;
    box-shadow:
        0 8px 24px rgba(0, 0, 0, 0.2),
        0 0 0 1px rgba(255, 255, 255, 0.1);
    position: relative;
    overflow: hidden;

    &::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
            90deg,
            transparent,
            rgba(255, 255, 255, 0.3),
            transparent
        );
        transition: left 0.6s ease;
    }

    &:hover {
        transform: translateY(-2px);
        box-shadow:
            0 12px 36px rgba(0, 0, 0, 0.3),
            0 0 0 1px rgba(255, 255, 255, 0.2);
        filter: brightness(1.1);

        &::before {
            left: 100%;
        }

        .age-card__link-icon {
            transform: translateX(4px);
        }
    }

    &:active {
        transform: translateY(0);
    }
}

.age-card__link-icon {
    transition: transform 0.3s ease;
}

// Scrolling Starmap Background - 3 repeating starmaps for continuity
.starmap-background {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: 1;
    overflow: hidden;
    pointer-events: none;
    transition: opacity 0.3s ease, transform 0.3s ease;
}

.starmap-container {
    position: relative;
    width: 500vw; // Wider container to prevent cropping
    height: 110vh;
    display: flex;
    will-change: transform;
    transform: translate3d(
        -100vw,
        -10vh,
        0
    ); // Start with center starmap visible, shifted up
    transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);

    @media (max-width: 1200px) {
        height: 100vh;
        transform: translate3d(-100vw, -5vh, 0);
    }

    @media (max-width: 768px) {
        width: 100%;
        height: 100%;
        transform: none;
        position: static;
        display: block;
    }
}

.starmap-layer {
    position: relative;
    width: 170vw; // Even wider to prevent horizontal gaps
    height: 110vh;
    object-fit: cover; // Cover instead of contain to fill gaps
    object-position: center 20%;
    opacity: 1;
    backface-visibility: hidden;
    flex-shrink: 0;

    @media (max-width: 1200px) {
        width: 150vw;
        height: 100vh;
        object-position: center center;
    }

    @media (max-width: 768px) {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        object-position: center center;

        &--left,
        &--right {
            display: none; // Only show center starmap on mobile
        }
    }
}

// Left starmap (previous cycle)
.starmap-layer--left {
    transform: translateX(0);
}

// Center starmap (current cycle)
.starmap-layer--center {
    transform: translateX(0);
}

// Right starmap (next cycle)
.starmap-layer--right {
    transform: translateX(0);
}

// Timeline Age Sections - Each age takes 100vw
.timeline-age-section {
    width: 100vw;
    height: 100vh;
    position: relative;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
}

// Animations
@keyframes cardGlow {
    0%,
    100% {
        opacity: 0.6;
    }
    50% {
        opacity: 1;
    }
}

// Responsive Design
@media (max-width: 768px) {
    .timeline-section {
        height: 100vh;
        height: 100dvh; // Use dynamic viewport height on mobile
        min-height: 100vh;
        position: relative;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .timeline-content {
        display: none;
    }

    .starmap-background {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 1;
    }

    .earth-container {
        position: absolute;
        bottom: -150px;
        left: 50%;
        transform: translateX(-50%);
        width: 300px;
        height: 300px;
        z-index: 2;
        opacity: 0.5;
    }

    .earth-sunrise {
        position: absolute;
        bottom: 100px;
        left: calc(50% + 100px);
        transform: translateX(-50%);
        width: 80px;
        height: 80px;
        z-index: 2;
        opacity: 0.6;
    }

    .age-card-container {
        position: relative;
        width: calc(100% - 2rem);
        max-width: 400px;
        top: auto;
        right: auto;
        left: auto;
        z-index: 10;
        background: transparent;
        margin: 0;
        padding: 0;
        transform: none;

        // Navigation buttons on mobile - inside the viewport
        .timeline-nav__btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 44px;
            height: 80px;
            border-radius: 0.75rem;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);

            &--prev {
                left: -52px;
            }

            &--next {
                right: -52px;
            }

            svg {
                width: 20px;
                height: 20px;
            }
        }
    }

    .age-card {
        background: rgba(0, 0, 0, 0.6);
        border: 1px solid rgba(255, 255, 255, 0.2);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        backdrop-filter: blur(20px) saturate(180%);
        -webkit-backdrop-filter: blur(20px) saturate(180%);
        padding: 1.5rem;
        padding-bottom: 4.5rem;
        border-radius: 1rem;
        margin: 0 auto;
        max-width: 100%;

        &::before {
            background: rgba(255, 255, 255, 0.1);
        }
    }

    .age-card__symbol {
        width: 44px;
        height: 44px;
        font-size: 1.25rem;
    }

    .age-card__title {
        color: rgba(255, 255, 255, 0.95);
        font-size: 1.25rem;
        margin-bottom: 0.5rem;
        padding-right: 50px;
    }

    .age-card__timespan {
        color: rgba(255, 255, 255, 0.7);
        font-size: 0.8rem;
        margin-bottom: 0.75rem;
    }

    .age-card__description {
        color: rgba(255, 255, 255, 0.85);
        font-size: 0.875rem;
        line-height: 1.5;
        margin-bottom: 1rem;
        max-height: 120px;
        overflow-y: auto;
    }

    .age-card__footer {
        border-top-color: rgba(255, 255, 255, 0.15);
        padding-top: 0.75rem;
    }

    .age-card__link {
        padding: 0.75rem 1.5rem;
        font-size: 0.8rem;
    }

    .age-card__images {
        margin: 0.75rem -1.5rem 0;
    }

    .age-card__image {
        height: 80px;
    }

    .age-progress {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        border-radius: 0 0 1rem 1rem;
        padding: 0.75rem;
    }

    .age-progress__segments {
        height: 16px;
    }

    .age-progress__segment {
        font-size: 0.4rem;
    }

    .age-selector__dropdown {
        bottom: calc(100% + 10px);
        left: 0.75rem;
        right: 0.75rem;
        max-height: 250px;
    }

    // Swipe hint
    .timeline-section::after {
        content: "";
        position: absolute;
        bottom: 1.5rem;
        left: 50%;
        transform: translateX(-50%);
        width: 40px;
        height: 4px;
        background: rgba(255, 255, 255, 0.3);
        border-radius: 2px;
        z-index: 20;
    }
}

// Accessibility
@media (prefers-reduced-motion: reduce) {
    .timeline-section,
    .starmap-container {
        transition: none !important;
    }

    .age-card,
    .age-card__link,
    .timeline-nav__btn {
        transition: none !important;
    }
}

// High Contrast Mode
@media (prefers-contrast: high) {
    .age-card {
        background: var(--color-background);
        border-width: 3px;
        backdrop-filter: none;
        box-shadow: none;
    }

    .timeline-nav__btn,
    .age-selector__trigger,
    .age-selector__dropdown {
        background: var(--color-background);
        border-width: 3px;
        backdrop-filter: none;
        box-shadow: none;
    }

    .earth-sphere {
        box-shadow: 0 0 0 3px var(--color-text);
    }
}

// Dark Theme Adjustments
[data-theme="dark"] {
    --color-cloud-primary: rgba(255, 255, 255, 0.15);
    --color-cloud-secondary: rgba(255, 255, 255, 0.1);
    --color-cloud-tertiary: rgba(255, 255, 255, 0.12);

    main:has(.timeline-section) {
        background: #0a0a0a !important;
    }

    .timeline-section {
        background: #0a0a0a !important;
    }

    .starmap-layer {
        opacity: 1;
        filter: brightness(0.8);
    }

    .earth-surface {
        filter: brightness(0.8);
    }

    .sunrise-image {
        filter: brightness(0.9);
    }

    // Enhanced glassmorphism for dark theme
    .age-card {
        border: 1px solid rgba(255, 255, 255, 0.1);
        box-shadow:
            0 25px 50px rgba(0, 0, 0, 0.5),
            0 0 0 1px rgba(255, 255, 255, 0.02),
            inset 0 1px 0 rgba(255, 255, 255, 0.05);

        &::before {
            background: rgba(27, 31, 34, 0.4);
        }
    }

    .age-progress {
        background: rgba(27, 31, 34, 0.4);
    }

    .age-progress__segments {
        background: rgba(0, 0, 0, 0.4);
    }

    .age-selector__dropdown {
        border: 1px solid rgba(255, 255, 255, 0.1);
        box-shadow:
            0 25px 50px rgba(0, 0, 0, 0.5),
            0 0 0 1px rgba(255, 255, 255, 0.02),
            inset 0 1px 0 rgba(255, 255, 255, 0.05);

        &::before {
            background: rgba(27, 31, 34, 0.4);
        }
    }
}

// Light Theme Adjustments
[data-theme="light"] {
    --color-cloud-primary: rgba(255, 255, 255, 0.5);
    --color-cloud-secondary: rgba(255, 255, 255, 0.4);
    --color-cloud-tertiary: rgba(255, 255, 255, 0.45);

    main:has(.timeline-section) {
        background: #f8f9fa !important;
    }

    .timeline-section {
        background: #f8f9fa !important;
    }

    .starmap-layer {
        opacity: 1;
        filter: brightness(1.1);
    }

    .earth-surface {
        filter: brightness(1.2);
    }

    .sunrise-image {
        filter: brightness(1.1);
    }

    // Enhanced glassmorphism for light theme
    .age-card {
        border: 1px solid rgba(255, 255, 255, 0.3);
        box-shadow:
            0 25px 50px rgba(0, 0, 0, 0.15),
            0 0 0 1px rgba(255, 255, 255, 0.1),
            inset 0 1px 0 rgba(255, 255, 255, 0.2);

        &::before {
            background: rgba(255, 255, 255, 0.25);
        }
    }

    .age-progress {
        background: rgba(255, 255, 255, 0.25);
    }

    .age-progress__segments {
        background: rgba(0, 0, 0, 0.2);
    }

    .age-selector__dropdown {
        border: 1px solid rgba(255, 255, 255, 0.3);
        box-shadow:
            0 25px 50px rgba(0, 0, 0, 0.15),
            0 0 0 1px rgba(255, 255, 255, 0.1),
            inset 0 1px 0 rgba(255, 255, 255, 0.2);

        &::before {
            background: rgba(255, 255, 255, 0.25);
        }
    }
}

// World Ages Cards Section
.world-ages-section {
    background: var(--color-background);
    min-height: 100vh;
    padding: 4rem 0;
    position: relative;
    z-index: 2;
    transform: translateY(0); // Remove gap by positioning directly adjacent
    transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    margin-top: 0;

    &__container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 0 2rem;

        @media (max-width: 768px) {
            padding: 0 1rem;
        }
    }

    &__header {
        text-align: center;
        margin-bottom: 4rem;

        @media (max-width: 768px) {
            margin-bottom: 3rem;
        }
    }

    &__title {
        font-family: typo.$font-family-lead;
        font-size: clamp(2.5rem, 5vw, 4rem);
        font-weight: 700;
        color: var(--color-text);
        margin: 0 0 1.5rem;
        line-height: 1.2;
    }

    &__description {
        font-size: 1.25rem;
        color: var(--color-text-muted);
        max-width: 700px;
        margin: 0 auto;
        line-height: 1.6;

        @media (max-width: 768px) {
            font-size: 1.125rem;
        }
    }

    &__grid {
        display: flex;
        flex-direction: column;
        gap: 3rem;
        margin-top: 2rem;

        @media (max-width: 768px) {
            gap: 2rem;
        }
    }
}

// World Age Card Component - Horizontal Layout
.world-age-card {
    background: transparent;
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: vars.$border-radius-xl;
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    box-shadow:
        0 25px 50px rgba(0, 0, 0, 0.25),
        0 0 0 1px rgba(255, 255, 255, 0.05),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;

    &::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(255, 255, 255, 0.15);
        border-radius: inherit;
        z-index: -1;
    }

    &::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: linear-gradient(
            90deg,
            transparent,
            var(--age-color, var(--color-accent-primary)),
            transparent
        );
        border-radius: vars.$border-radius-xl vars.$border-radius-xl 0 0;
    }

    &:hover {
        transform: translateY(-4px);
        box-shadow:
            0 30px 70px rgba(0, 0, 0, 0.3),
            0 0 0 1px rgba(255, 255, 255, 0.1),
            inset 0 1px 0 rgba(255, 255, 255, 0.2);
    }

    // Color mapping
    &[data-age-color="yellow"] {
        --age-color: #fbf8cc;
    }
    &[data-age-color="pink"] {
        --age-color: #fde4cf;
    }
    &[data-age-color="soft-pink"] {
        --age-color: #ffcfd2;
    }
    &[data-age-color="lavender"] {
        --age-color: #f1c0e8;
    }
    &[data-age-color="mauve"] {
        --age-color: #cfbaf0;
    }
    &[data-age-color="blue"] {
        --age-color: #a3c4f3;
    }
    &[data-age-color="cyan"] {
        --age-color: #90dbf4;
    }
    &[data-age-color="teal"] {
        --age-color: #8eecf5;
    }
    &[data-age-color="mint"] {
        --age-color: #98f5e1;
    }
    &[data-age-color="green"] {
        --age-color: #b9fbc0;
    }

    &__link {
        display: flex;
        align-items: stretch;
        padding: 2rem;
        text-decoration: none;
        color: inherit;
        height: 100%;
        gap: 2rem;

        @media (max-width: 768px) {
            flex-direction: column;
            padding: 1.5rem;
            gap: 1rem;
        }
    }

    &__content {
        flex: 1;
        display: flex;
        flex-direction: column;
        min-width: 0;
    }

    &__header {
        display: flex;
        align-items: center;
        gap: 1rem;
        margin-bottom: 1rem;
    }

    &__symbol {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 50px;
        height: 50px;
        background: linear-gradient(
            135deg,
            var(--age-color, var(--color-accent-primary)),
            var(--age-color, var(--color-accent-primary)) cc
        );
        border-radius: 50%;
        font-size: 1.5rem;
        font-family: typo.$font-family-tech;
        color: #ffffff;
        box-shadow:
            0 8px 24px rgba(0, 0, 0, 0.3),
            0 0 0 2px rgba(255, 255, 255, 0.1);
        flex-shrink: 0;

        @media (max-width: 768px) {
            width: 40px;
            height: 40px;
            font-size: 1.25rem;
        }
    }

    &__title {
        font-family: typo.$font-family-lead;
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--color-text);
        margin: 0;
        line-height: 1.3;

        @media (max-width: 768px) {
            font-size: 1.25rem;
        }
    }

    &__timespan {
        font-family: typo.$font-family-tech;
        font-size: 0.875rem;
        color: var(--color-text-muted);
        margin-bottom: 1rem;

        @media (max-width: 768px) {
            font-size: 0.8rem;
        }
    }

    &__separator {
        color: var(--age-color, var(--color-accent-primary));
        font-weight: 600;
    }

    &__description {
        font-size: 1rem;
        line-height: 1.6;
        color: var(--color-text);
        margin: 0 0 auto;

        @media (max-width: 768px) {
            font-size: 0.9rem;
        }
    }

    &__images {
        display: flex;
        gap: 0.5rem;
        min-width: 300px;

        @media (max-width: 768px) {
            min-width: auto;
            flex-direction: row;
            overflow-x: auto;
        }
    }

    &__image {
        flex: 1;
        height: 150px;
        object-fit: cover;
        border-radius: vars.$border-radius-md;
        border: 1px solid rgba(255, 255, 255, 0.1);
        min-width: 90px;

        @media (max-width: 768px) {
            height: 120px;
            min-width: 120px;
        }
    }

    &__footer {
        margin-top: 1rem;
        padding-top: 1rem;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    &__read-more {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.875rem;
        font-weight: 600;
        color: var(--age-color, var(--color-accent-primary));
        transition: all 0.3s ease;
    }

    &__arrow {
        transition: transform 0.3s ease;
    }

    &:hover &__read-more {
        gap: 0.75rem;
    }

    &:hover &__arrow {
        transform: translateX(4px);
    }
}

// Print Styles
@media print {
    .timeline-section,
    .timeline-content {
        height: auto;
        overflow: visible;
        position: static;
        width: 100%;
    }

    .earth-container,
    .timeline-parallax,
    .timeline-nav,
    .age-selector,
    .starmap-background {
        display: none;
    }

    .age-card-container {
        position: static;
        transform: none;
        width: 100%;
        page-break-inside: avoid;
    }

    .age-card {
        background: white;
        color: black;
        border: 2px solid #333;
        box-shadow: none;
        backdrop-filter: none;
    }

    .world-ages-section {
        page-break-before: always;
    }

    .world-age-card {
        background: white;
        color: black;
        border: 2px solid #333;
        box-shadow: none;
        backdrop-filter: none;
        break-inside: avoid;
        margin-bottom: 2rem;
    }
}
