// Glossary Tooltip
// Shows wiki definitions on hover over wiki links

.glossary-term {
    text-decoration-style: dotted;
    text-decoration-color: var(--color-accent-primary);
    text-underline-offset: 3px;
    cursor: help;

    &:hover {
        text-decoration-style: solid;
    }
}

.glossary-tooltip {
    position: absolute;
    z-index: 150;
    width: 300px;
    max-width: calc(100vw - 2rem);
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.2s ease, visibility 0.2s ease, transform 0.2s ease;
    pointer-events: none;

    // Default: positioned above the link (fallback), arrow at bottom
    transform: translateX(-50%) translateY(-8px);

    &--visible {
        opacity: 1;
        visibility: visible;
        transform: translateX(-50%) translateY(0);
        pointer-events: auto;
    }

    // When positioned below the link (default behavior), arrow at top
    &--bottom {
        transform: translateX(-50%) translateY(8px);

        &.glossary-tooltip--visible {
            transform: translateX(-50%) translateY(0);
        }

        .glossary-tooltip__arrow {
            bottom: auto;
            top: -6px;

            &::before {
                top: auto;
                bottom: -5px;
            }
        }
    }

    &__content {
        background-color: var(--color-navbar-bg);
        backdrop-filter: blur(16px) saturate(180%);
        -webkit-backdrop-filter: blur(16px) saturate(180%);
        border: 1px solid var(--color-hairline);
        border-radius: 0.75rem;
        padding: 0.875rem 1rem;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
    }

    &__header {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 0.5rem;
    }

    &__term {
        font-weight: 600;
        font-size: 0.9375rem;
        color: var(--color-text);
    }

    &__badge {
        font-size: 0.625rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        padding: 0.125rem 0.375rem;
        background-color: var(--color-accent-primary);
        color: var(--color-background);
        border-radius: 0.25rem;
    }

    &__definition {
        font-size: 0.8125rem;
        line-height: 1.5;
        color: var(--color-text-muted);
        margin: 0 0 0.5rem;
    }

    &__hint {
        font-size: 0.6875rem;
        color: var(--color-text-muted);
        opacity: 0.7;
    }

    &__arrow {
        position: absolute;
        bottom: -6px;
        left: 50%;
        transform: translateX(-50%);
        width: 12px;
        height: 6px;
        overflow: hidden;

        &::before {
            content: '';
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: var(--color-navbar-bg);
            border: 1px solid var(--color-hairline);
            transform: translateX(-50%) translateY(-50%) rotate(45deg);
            left: 50%;
            top: 0;
        }
    }
}

// Hide on print and mobile (touch devices)
@media print {
    .glossary-tooltip {
        display: none !important;
    }
}

@media (hover: none) {
    .glossary-term {
        text-decoration-style: solid;
        cursor: pointer;
    }

    .glossary-tooltip {
        display: none;
    }
}
