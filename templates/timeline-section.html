{% extends "base.html" %} {% block content %} {% set ages_data =
load_data(path="data/ages.json") %}
<div class="timeline-viewport">
    <!-- Sun behind Earth -->
    <div class="earth-sunrise">
        <div class="sunrise-glow"></div>
        <div class="sunrise-rays">
            <div class="ray ray-1"></div>
            <div class="ray ray-2"></div>
            <div class="ray ray-3"></div>
            <div class="ray ray-4"></div>
            <div class="ray ray-5"></div>
            <div class="ray ray-6"></div>
            <div class="ray ray-7"></div>
            <div class="ray ray-8"></div>
        </div>
    </div>

    <!-- Fixed Earth (SVG) -->
    <div class="earth-container">
        <svg width="600" height="600">
            <defs>
                <pattern
                    id="earthTexture"
                    patternUnits="objectBoundingBox"
                    width="1"
                    height="1"
                >
                    <image href="/earth.png" width="600" height="600" />
                </pattern>
            </defs>
            <circle cx="300" cy="300" r="300" fill="url(#earthTexture)" />
        </svg>
    </div>

    <!-- Scrolling Starmap Background - 3 repeating starmaps -->
    <div class="starmap-background">
        <div class="starmap-container" id="starmap-container">
            <!-- Left starmap (previous cycle) -->
            <img
                src="/starmap.svg"
                alt="Star Map Left"
                class="starmap-layer starmap-layer--left"
            />
            <!-- Center starmap (current cycle) -->
            <img
                src="/starmap.svg"
                alt="Star Map Center"
                class="starmap-layer starmap-layer--center"
            />
            <!-- Right starmap (next cycle) -->
            <img
                src="/starmap.svg"
                alt="Star Map Right"
                class="starmap-layer starmap-layer--right"
            />
        </div>
    </div>

    <!-- Fixed Age Card Container -->
    <div class="age-card-container">
        <div class="age-card" id="age-card">
            <div class="age-card__symbol" id="age-symbol">♑</div>
            <div class="age-card__content">
                <h2 class="age-card__title" id="age-title">Age of Capricorn</h2>
                <div class="age-card__timespan" id="age-timespan">
                    <span class="age-card__start">21810 BC</span>
                    <span class="age-card__separator">→</span>
                    <span class="age-card__end">19650 BC</span>
                </div>
                <div class="age-card__description" id="age-description">
                    Synthetic life engineering on the Elohim home planet with
                    the inevitable escape of synthetic 'monster' lifeforms.
                    Earth discovered, exploration. Known as the 1st day of
                    Creation (Genesis)
                </div>
                <div class="age-card__footer">
                    <div class="age-card__duration">Duration: ~2,160 years</div>
                    <a
                        href="/timeline/age-of-capricorn"
                        class="age-card__link"
                        id="age-link"
                    >
                        Explore This Age
                        <svg
                            class="age-card__link-icon"
                            width="16"
                            height="16"
                            viewBox="0 0 16 16"
                            fill="none"
                        >
                            <path
                                d="M6 12L10 8L6 4"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                            />
                        </svg>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Age Progress Indicator -->
    <div class="age-progress">
        <div class="age-progress__track">
            <div class="age-progress__fill" id="progress-fill"></div>
        </div>
        <div class="age-progress__current" id="progress-current">1 of 12</div>
    </div>

    <!-- Combined Timeline Navigation -->
    <div class="timeline-nav">
        <button
            class="timeline-nav__btn timeline-nav__btn--prev"
            id="nav-prev"
            aria-label="Previous Age"
        >
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path
                    d="M12 16L6 10L12 4"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                />
            </svg>
        </button>

        <div class="age-selector">
            <button class="age-selector__trigger" id="age-selector-trigger">
                Jump to Age
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                    <path
                        d="M4 6L8 10L12 6"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                    />
                </svg>
            </button>
            <div class="age-selector__dropdown" id="age-selector-dropdown">
                {% for age in ages_data %}
                <button
                    class="age-selector__option"
                    data-age-index="{{ loop.index0 }}"
                    data-age-color="{{ age.color }}"
                >
                    <span class="age-selector__symbol">{{ age.symbol }}</span>
                    <span class="age-selector__name">{{ age.name }}</span>
                </button>
                {% endfor %}
            </div>
        </div>

        <button
            class="timeline-nav__btn timeline-nav__btn--next"
            id="nav-next"
            aria-label="Next Age"
        >
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path
                    d="M8 4L14 10L8 16"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                />
            </svg>
        </button>
    </div>
</div>

<!-- Horizontal Timeline Sections -->
<div class="timeline-section" id="timeline-section">
    {% for age in ages_data %}
    <div class="timeline-age-section" data-age-index="{{ loop.index0 }}">
        <!-- Each age section is 100vw wide -->
    </div>
    {% endfor %}
</div>

<script src="/js/timeline.js"></script>
{% endblock content %}
