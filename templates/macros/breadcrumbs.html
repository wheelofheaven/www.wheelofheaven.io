{# Breadcrumbs Macros

   Renders breadcrumb navigation with proper accessibility and SEO markup.
   Each page type has its own convenience macro.

   Usage:
   {% import "macros/breadcrumbs.html" as breadcrumbs %}
   {{ breadcrumbs::wiki(page=page, lang=detected_lang) }}
#}

{# Convenience macro for Wiki pages #}
{% macro wiki(page, lang="en") %}
<nav class="breadcrumbs" aria-label="Breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
    <ol class="breadcrumbs__list">
        <li class="breadcrumbs__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a href="{{ get_url(path='/', lang=lang) }}" class="breadcrumbs__link breadcrumbs__link--home" itemprop="item">
                {% include "partials/brand/logomark.html" %}
                <span class="visually-hidden" itemprop="name">Home</span>
            </a>
            <meta itemprop="position" content="1" />
        </li>
        <li class="breadcrumbs__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a href="{{ get_url(path='/wiki/', lang=lang) }}" class="breadcrumbs__link" itemprop="item">
                <span itemprop="name">Wiki</span>
            </a>
            <meta itemprop="position" content="2" />
        </li>
        {% if page.extra.category %}
        <li class="breadcrumbs__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <span class="breadcrumbs__current" itemprop="name">{{ page.extra.category }}</span>
            <meta itemprop="position" content="3" />
        </li>
        <li class="breadcrumbs__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <span class="breadcrumbs__current" itemprop="name">{{ page.title }}</span>
            <meta itemprop="position" content="4" />
        </li>
        {% else %}
        <li class="breadcrumbs__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <span class="breadcrumbs__current" itemprop="name">{{ page.title }}</span>
            <meta itemprop="position" content="3" />
        </li>
        {% endif %}
    </ol>
</nav>
{% endmacro wiki %}

{# Convenience macro for Explainer pages #}
{% macro explainer(page, lang="en") %}
<nav class="breadcrumbs" aria-label="Breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
    <ol class="breadcrumbs__list">
        <li class="breadcrumbs__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a href="{{ get_url(path='/', lang=lang) }}" class="breadcrumbs__link breadcrumbs__link--home" itemprop="item">
                {% include "partials/brand/logomark.html" %}
                <span class="visually-hidden" itemprop="name">Home</span>
            </a>
            <meta itemprop="position" content="1" />
        </li>
        <li class="breadcrumbs__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a href="{{ get_url(path='/explainers/', lang=lang) }}" class="breadcrumbs__link" itemprop="item">
                <span itemprop="name">Explainers</span>
            </a>
            <meta itemprop="position" content="2" />
        </li>
        {% if page.extra.category %}
        <li class="breadcrumbs__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <span class="breadcrumbs__current" itemprop="name">{{ page.extra.category }}</span>
            <meta itemprop="position" content="3" />
        </li>
        <li class="breadcrumbs__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <span class="breadcrumbs__current" itemprop="name">{{ page.title }}</span>
            <meta itemprop="position" content="4" />
        </li>
        {% else %}
        <li class="breadcrumbs__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <span class="breadcrumbs__current" itemprop="name">{{ page.title }}</span>
            <meta itemprop="position" content="3" />
        </li>
        {% endif %}
    </ol>
</nav>
{% endmacro explainer %}

{# Convenience macro for Essentials pages #}
{% macro essentials(page, lang="en") %}
<nav class="breadcrumbs" aria-label="Breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
    <ol class="breadcrumbs__list">
        <li class="breadcrumbs__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a href="{{ get_url(path='/', lang=lang) }}" class="breadcrumbs__link breadcrumbs__link--home" itemprop="item">
                {% include "partials/brand/logomark.html" %}
                <span class="visually-hidden" itemprop="name">Home</span>
            </a>
            <meta itemprop="position" content="1" />
        </li>
        <li class="breadcrumbs__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a href="{{ get_url(path='/essentials/', lang=lang) }}" class="breadcrumbs__link" itemprop="item">
                <span itemprop="name">Essentials</span>
            </a>
            <meta itemprop="position" content="2" />
        </li>
        <li class="breadcrumbs__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <span class="breadcrumbs__current" itemprop="name">{{ page.title }}</span>
            <meta itemprop="position" content="3" />
        </li>
    </ol>
</nav>
{% endmacro essentials %}

{# Convenience macro for Library pages #}
{% macro library(book_title, lang="en") %}
<nav class="breadcrumbs" aria-label="Breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
    <ol class="breadcrumbs__list">
        <li class="breadcrumbs__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a href="{{ get_url(path='/', lang=lang) }}" class="breadcrumbs__link breadcrumbs__link--home" itemprop="item">
                {% include "partials/brand/logomark.html" %}
                <span class="visually-hidden" itemprop="name">Home</span>
            </a>
            <meta itemprop="position" content="1" />
        </li>
        <li class="breadcrumbs__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a href="{{ get_url(path='/library/', lang=lang) }}" class="breadcrumbs__link" itemprop="item">
                <span itemprop="name">Library</span>
            </a>
            <meta itemprop="position" content="2" />
        </li>
        <li class="breadcrumbs__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <span class="breadcrumbs__current" itemprop="name">{{ book_title }}</span>
            <meta itemprop="position" content="3" />
        </li>
    </ol>
</nav>
{% endmacro library %}

{# Convenience macro for Community/Info pages (FAQ, Code of Conduct, etc.) #}
{% macro community(page, lang="en") %}
<nav class="breadcrumbs" aria-label="Breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
    <ol class="breadcrumbs__list">
        <li class="breadcrumbs__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a href="{{ get_url(path='/', lang=lang) }}" class="breadcrumbs__link breadcrumbs__link--home" itemprop="item">
                {% include "partials/brand/logomark.html" %}
                <span class="visually-hidden" itemprop="name">Home</span>
            </a>
            <meta itemprop="position" content="1" />
        </li>
        <li class="breadcrumbs__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <span class="breadcrumbs__current" itemprop="name">{{ page.title }}</span>
            <meta itemprop="position" content="2" />
        </li>
    </ol>
</nav>
{% endmacro community %}

{# Convenience macro for Resources pages #}
{% macro resources(page, lang="en") %}
<nav class="breadcrumbs" aria-label="Breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
    <ol class="breadcrumbs__list">
        <li class="breadcrumbs__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a href="{{ get_url(path='/', lang=lang) }}" class="breadcrumbs__link breadcrumbs__link--home" itemprop="item">
                {% include "partials/brand/logomark.html" %}
                <span class="visually-hidden" itemprop="name">Home</span>
            </a>
            <meta itemprop="position" content="1" />
        </li>
        <li class="breadcrumbs__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a href="{{ get_url(path='/resources/', lang=lang) }}" class="breadcrumbs__link" itemprop="item">
                <span itemprop="name">Resources</span>
            </a>
            <meta itemprop="position" content="2" />
        </li>
        {% if page.extra.medium %}
        <li class="breadcrumbs__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <span class="breadcrumbs__current" itemprop="name">{{ page.extra.medium | replace(from="-", to=" ") | title }}</span>
            <meta itemprop="position" content="3" />
        </li>
        <li class="breadcrumbs__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <span class="breadcrumbs__current" itemprop="name">{{ page.title }}</span>
            <meta itemprop="position" content="4" />
        </li>
        {% else %}
        <li class="breadcrumbs__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <span class="breadcrumbs__current" itemprop="name">{{ page.title }}</span>
            <meta itemprop="position" content="3" />
        </li>
        {% endif %}
    </ol>
</nav>
{% endmacro resources %}
