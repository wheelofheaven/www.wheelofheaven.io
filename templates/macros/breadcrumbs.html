{# Breadcrumbs Macros

   Renders breadcrumb navigation with proper accessibility and SEO markup.
   Each page type has its own convenience macro.

   Usage:
   {% import "macros/breadcrumbs.html" as breadcrumbs %}
   {{ breadcrumbs::wiki(page=page, lang=detected_lang) }}
#}

{# Convenience macro for Wiki pages #}
{% macro wiki(page, lang="en") %}
<nav class="breadcrumbs" aria-label="Breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
    <ol class="breadcrumbs__list">
        <li class="breadcrumbs__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a href="{{ get_url(path='/', lang=lang) }}" class="breadcrumbs__link breadcrumbs__link--home" itemprop="item">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                    <polyline points="9 22 9 12 15 12 15 22"></polyline>
                </svg>
                <span itemprop="name">Home</span>
            </a>
            <meta itemprop="position" content="1" />
        </li>
        <li class="breadcrumbs__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a href="{{ get_url(path='/wiki/', lang=lang) }}" class="breadcrumbs__link" itemprop="item">
                <span itemprop="name">Wiki</span>
            </a>
            <meta itemprop="position" content="2" />
        </li>
        {% if page.extra.category %}
        <li class="breadcrumbs__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <span class="breadcrumbs__current" itemprop="name">{{ page.extra.category }}</span>
            <meta itemprop="position" content="3" />
        </li>
        <li class="breadcrumbs__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <span class="breadcrumbs__current" itemprop="name">{{ page.title }}</span>
            <meta itemprop="position" content="4" />
        </li>
        {% else %}
        <li class="breadcrumbs__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <span class="breadcrumbs__current" itemprop="name">{{ page.title }}</span>
            <meta itemprop="position" content="3" />
        </li>
        {% endif %}
    </ol>
</nav>
{% endmacro wiki %}

{# Convenience macro for Explainer pages #}
{% macro explainer(page, lang="en") %}
<nav class="breadcrumbs" aria-label="Breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
    <ol class="breadcrumbs__list">
        <li class="breadcrumbs__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a href="{{ get_url(path='/', lang=lang) }}" class="breadcrumbs__link breadcrumbs__link--home" itemprop="item">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                    <polyline points="9 22 9 12 15 12 15 22"></polyline>
                </svg>
                <span itemprop="name">Home</span>
            </a>
            <meta itemprop="position" content="1" />
        </li>
        <li class="breadcrumbs__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a href="{{ get_url(path='/explainers/', lang=lang) }}" class="breadcrumbs__link" itemprop="item">
                <span itemprop="name">Explainers</span>
            </a>
            <meta itemprop="position" content="2" />
        </li>
        {% if page.extra.category %}
        <li class="breadcrumbs__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <span class="breadcrumbs__current" itemprop="name">{{ page.extra.category }}</span>
            <meta itemprop="position" content="3" />
        </li>
        <li class="breadcrumbs__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <span class="breadcrumbs__current" itemprop="name">{{ page.title }}</span>
            <meta itemprop="position" content="4" />
        </li>
        {% else %}
        <li class="breadcrumbs__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <span class="breadcrumbs__current" itemprop="name">{{ page.title }}</span>
            <meta itemprop="position" content="3" />
        </li>
        {% endif %}
    </ol>
</nav>
{% endmacro explainer %}

{# Convenience macro for Essentials pages #}
{% macro essentials(page, lang="en") %}
<nav class="breadcrumbs" aria-label="Breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
    <ol class="breadcrumbs__list">
        <li class="breadcrumbs__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a href="{{ get_url(path='/', lang=lang) }}" class="breadcrumbs__link breadcrumbs__link--home" itemprop="item">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                    <polyline points="9 22 9 12 15 12 15 22"></polyline>
                </svg>
                <span itemprop="name">Home</span>
            </a>
            <meta itemprop="position" content="1" />
        </li>
        <li class="breadcrumbs__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a href="{{ get_url(path='/essentials/', lang=lang) }}" class="breadcrumbs__link" itemprop="item">
                <span itemprop="name">Essentials</span>
            </a>
            <meta itemprop="position" content="2" />
        </li>
        <li class="breadcrumbs__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <span class="breadcrumbs__current" itemprop="name">{{ page.title }}</span>
            <meta itemprop="position" content="3" />
        </li>
    </ol>
</nav>
{% endmacro essentials %}

{# Convenience macro for Library pages #}
{% macro library(book_title, lang="en") %}
<nav class="breadcrumbs" aria-label="Breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
    <ol class="breadcrumbs__list">
        <li class="breadcrumbs__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a href="{{ get_url(path='/', lang=lang) }}" class="breadcrumbs__link breadcrumbs__link--home" itemprop="item">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                    <polyline points="9 22 9 12 15 12 15 22"></polyline>
                </svg>
                <span itemprop="name">Home</span>
            </a>
            <meta itemprop="position" content="1" />
        </li>
        <li class="breadcrumbs__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a href="{{ get_url(path='/library/', lang=lang) }}" class="breadcrumbs__link" itemprop="item">
                <span itemprop="name">Library</span>
            </a>
            <meta itemprop="position" content="2" />
        </li>
        <li class="breadcrumbs__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <span class="breadcrumbs__current" itemprop="name">{{ book_title }}</span>
            <meta itemprop="position" content="3" />
        </li>
    </ol>
</nav>
{% endmacro library %}
